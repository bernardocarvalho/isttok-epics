#
# Project       : ISTTOK slow Control
#
# File          : $Id: ISTTOKcontrol.db 4709 2013-05-03 13:44:29Z bernardo $
# Description   : Records for ISTTOK Control 
#
##
# Author        : Bernardo Carvalho (IPFN-IST)
#
# Copyright (c) : (IPFN-IST)
# Created 3-Mar-2013
#
# SVN keywords
# $Date: 2013-05-03 14:44:29 +0100 (Fri, 03 May 2013) $
# $Revision: 4709 $
# $URL: http://metis.ipfn.ist.utl.pt/svn/cdaq/ISTTOK/Software/EPICS/ISTTOKcontrol/trunk/ISTTOKApp/Db/ISTTOKcontrol.db $
##

record(mbbi, "$(P)$(R)OPSTATE") {
	field(DESC, "Multiple Pulse Sequence State")
	field(ZRVL, "0")
	field(ONVL, "1")
	field(TWVL, "2")
	field(THVL, "3")
	field(FRVL, "4")
	field(FVVL, "5")
	field(SXVL, "6")
	field(ZRST, "Stopped")
	field(ONST, "Starting")
	field(TWST, "Process")
	field(THST, "Clean")
	field(FRST, "WaitShot")
	field(FVST, "Stopping")
	field(SXST, "Emergency")
	field(VAL, "0")
}

record(calc, "$(P)$(R)OPCALCSTATE") {
	field(DESC, "Pulse Calculated State")
	field(CALC,"2^A")
	field(SCAN,"1 second")
	field(INPA,"$(P)$(R)OPSTATE.VAL PP NMS")
}

record(calc, "$(P)$(R)OPCALCSTARTSTATE") {
	field(DESC, "Start Calculated State")
	field(CALC,"2^A")
	field(SCAN,"1 second")
	field(INPA,"$(P)$(R)STARTINGSTATE.VAL PP NMS")
}

record(calc, "$(P)$(R)OPCALCSTOPSTATE") {
	field(DESC, "Stop Calculated State")
	field(CALC,"2^A")
	field(SCAN,"1 second")
	field(INPA,"$(P)$(R)STOPPINGSTATE.VAL PP NMS")
}

record(calc, "$(P)$(R)OPCALCACLEANSTATE") {
	field(DESC, "Clean Automatic Calculated State")
	field(CALC,"(2^(A+1))-1")
	field(SCAN,"1 second")
	field(INPA,"$(P)$(R)CLEANINGSTATE.VAL PP NMS")
}

record(calc, "$(P)$(R)OPCALCMCLEANSTATE") {
	field(DESC, "Clean Manual Calculated State")
	field(CALC,"2^A")
	field(SCAN,"1 second")
	field(INPA,"$(P)$(R)CLEANINGSTATE.VAL PP NMS")
}

record(calc, "$(P)$(R)OPCALCWSHOTSTATE") {
	field(DESC, "WaitShot Calculated State")
	field(CALC,"2^A")
	field(SCAN,"1 second")
	field(INPA,"$(P)$(R)WSHOTINGSTATE.VAL PP NMS")
}

record(ai, "$(P)$(R)Temperature_0") {
	field(DESC, "ISTTOK Temperature 0 Calculated")
	field(EGU, "C")
	field(SCAN,"1 second")
}

record(bo, "$(P)$(R)OPREQ") {
	field(DESC, "Pulse Sequence Start/Stop")
	field(VAL, "0")
	field(ZNAM, "STOP")
	field(ONAM, "START")
}

record(bo, "$(P)$(R)CLEANINGMASTATE") {
	field(DESC, "Cleaning Manual/Auto")
	field(VAL, "1")
	field(ZNAM, "M")
	field(ONAM, "A")
}

record(ai, "$(P)$(R)CLEANINGINOUTSTATE") {
	field(DESC, "Cleaning Automatic In/Out")
	field(VAL, "1")
}

record(ai, "$(P)$(R)CLEANINGINOUTSTATE0") {
	field(DESC, "Cleaning Automatic In/Out")
	field(VAL, "-2")
}

record(ai, "$(P)$(R)CLEANINGINOUTSTATE1") {
	field(DESC, "Cleaning Automatic In/Out")
	field(VAL, "-2")
}

record(ai, "$(P)$(R)CLEANINGINOUTSTATE2") {
	field(DESC, "Cleaning Automatic In/Out")
	field(VAL, "-2")
}

record(ai, "$(P)$(R)CLEANINGINOUTSTATE3") {
	field(DESC, "Cleaning Automatic In/Out")
	field(VAL, "-2")
}

record(ai, "$(P)$(R)CLEANINGINOUTSTATE4") {
	field(DESC, "Cleaning Automatic In/Out")
	field(VAL, "-2")
}

record(ai, "$(P)$(R)CLEANINGINOUTSTATE5") {
	field(DESC, "Cleaning Automatic In/Out")
	field(VAL, "-2")
}

record(bo, "$(P)$(R)FSTriggerState") {
	field(DESC, "FireSignal Trigger Start")
	field(VAL, "0")
	field(ZNAM, "STOP")
	field(ONAM, "START")
}

record(bo, "$(P)$(R)PROCESS-MODE") {
	info(autosaveFields, "VAL")
	field(DESC, "Plasma Process Mode")
	#field(VAL, "0")
	field(ZNAM, "CLEAN")
	field(ONAM, "SHOT")
}

record(bo, "$(P)$(R)PROCESS-REQ") {
	field(DESC, "Plasma Process sub-states Start/Stop")
	field(VAL, "0")
	field(ZNAM, "STOP")
	field(ONAM, "START")
}

record(bo, "$(P)$(R)AUTHORISATION") {
	field(DESC, "Pulse Sequence Authorisation Start/Abort")
	field(ZNAM, "ABORT")
	field(ONAM, "START")
	field(VAL, "0")
}

record(longout, "$(P)$(R)PULSE-NUMBER") {
	info(autosaveFields, "VAL")
	field(DESC, "Pulse Number")
}

record(calc, "$(P)$(R)COUNTDOWN") {
	field(DESC, "Countdown Increment")
	field(INPA,"$(P)$(R)COUNTDOWN")
	field(SCAN,"Passive")
	field(CALC,"A+1")
	field(VAL, "160")
}

record(calc, "$(P)$(R)COUNTER") {
	field(DESC, "0.1 s counter")
	field(INPA, "$(P)$(R)COUNTER")
	field(SCAN, ".1 second")
	field(CALC, "A + .1")
}

record(stringin, "$(P)$(R)CurrentTime") {
	field(DESC, "Current Date and Time of the IOC")
	field(SCAN, "1 second")
	field(DTYP, "Soft Timestamp")
	field(PINI, "YES")
	field(INP, "@%d/%m/%Y %H:%M:%S")
}

record(stringout, "$(P)$(R)TraceMessage") {
	field(DESC, "Trace Message from IOC")
	field(VAL, "Trace mode ON")
}

record(mbbi, "$(P)$(R)STARTINGSTATE") {
	field(DESC, "Starting State Sequence")
	field(ZRVL, "0")
	field(ONVL, "1")
	field(TWVL, "2")
	field(THVL, "3")
	field(FRVL, "4")
	field(FVVL, "5")
	field(ZRST, "NonStarting")
	field(ONST, "Starting1")
	field(TWST, "Starting2")
	field(THST, "Starting3")
	field(FRST, "Starting4")
	field(FVST, "Starting5")
	field(VAL, "0")
}

record(mbbi, "$(P)$(R)STOPPINGSTATE") {
	field(DESC, "Stopping State Sequence")
	field(ZRVL, "0")
	field(ONVL, "1")
	field(TWVL, "2")
	field(THVL, "3")
	field(FRVL, "4")
	field(FVVL, "5")
	field(ZRST, "NonStopped")
	field(ONST, "Stopping1")
	field(TWST, "Stopping2")
	field(THST, "Stopping3")
	field(FRST, "Stopping4")
	field(FVST, "Stopping5")
	field(VAL, "0")
}

record(mbbi, "$(P)$(R)CLEANINGSTATE") {
	field(DESC, "Cleaning State Sequence")
	field(ZRVL, "0")
	field(ONVL, "1")
	field(TWVL, "2")
	field(THVL, "3")
	field(FRVL, "4")
	field(FVVL, "5")
	field(ZRST, "NonCleaning")
	field(ONST, "Cleaning1")
	field(TWST, "Cleaning2")
	field(THST, "Cleaning3")
	field(FRST, "Cleaning4")
	field(FVST, "Cleaning5")
	field(VAL, "0")
}

record(mbbi, "$(P)$(R)WSHOTINGSTATE") {
	field(DESC, "Shoting State Sequence")
	field(ZRVL, "0")
	field(ONVL, "1")
	field(TWVL, "2")
	field(THVL, "3")
	field(FRVL, "4")
	field(FVVL, "5")
	field(SXVL, "6")
	field(SVVL, "7")
	field(EIVL, "8")
	field(NIVL, "9")
	field(TEVL, "10")
	field(ELVL, "11")
	field(ZRST, "NonShoting")
	field(ONST, "Shoting1")
	field(TWST, "Shoting2")
	field(THST, "Shoting3")
	field(FRST, "Shoting4")
	field(FVST, "Shoting5")
	field(SXST, "Shoting6")
	field(SVST, "Shoting7")
	field(EIST, "Shoting8")
	field(NIST, "Shoting9")
	field(TEST, "Shoting10")
	field(ELST, "Shoting11")
	field(VAL, "0")
}

